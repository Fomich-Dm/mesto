!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r){var o=e.name,i=e.link;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=o,this._link=i,this._cardSelector=n,this._handleCardClick=r}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".cards__item").cloneNode(!0)}},{key:"createCard",value:function(){this._element=this._getTemplate(),this._setEventListeners();var e=this._element.querySelector(".cards__image");return this._element.querySelector(".cards__name").textContent=this._name,e.src=this._link,e.alt=this._name,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".cards__like").addEventListener("click",(function(){e._handleLikeClick()})),this._element.querySelector(".cards__delete").addEventListener("click",(function(){e._handleRemoveClick()})),this._element.querySelector(".cards__image").addEventListener("click",this._handleCardClick)}},{key:"_handleLikeClick",value:function(){this._element.querySelector(".cards__like").classList.toggle("cards__like_active")}},{key:"_handleRemoveClick",value:function(){this._element.remove()}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=t.item,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialArray=r,this._renderer=o,this._container=document.querySelector(n)}var t,r;return t=e,(r=[{key:"renderItem",value:function(){var e=this;this._initialArray.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),o={inputError:"popup__input_type_error",inputErrorActive:"popup__input-error_active",inputForm:".popup__input",submitButton:".popup__button",form:".popup__info",submitButtonInactive:"popup__button_inactive"};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),u(this,"_handleClickClose",(function(e){e.target===e.currentTarget&&n.close(e.currentTarget)})),this._selector=document.querySelector(t),this._buttonClose=this._selector.querySelector(".popup__close")}var t,n;return t=e,(n=[{key:"open",value:function(){this._selector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),this._selector.addEventListener("mousedown",this._handleClickClose)}},{key:"close",value:function(){this._selector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),this._selector.removeEventListener("mousedown",this._handleClickClose)}},{key:"setEventListener",value:function(){var e=this;this._buttonClose.addEventListener("click",(function(){e.close()}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=p(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},l.apply(this,arguments)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function d(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function u(e){var t,n=e.selectorPopup,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._handleFormSubmit=r,t._element=t._selector.querySelector(".popup__info"),t}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._element.querySelectorAll(".popup__input"),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListener",value:function(){var e=this;this._element.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())})),l(_(u.prototype),"setEventListener",this).call(this)}},{key:"close",value:function(){this._element.reset(),l(_(u.prototype),"close",this).call(this)}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=b(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},v.apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function w(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._image=t._selector.querySelector(".popup__img"),t._name=t._selector.querySelector(".popup__title-place"),t}return t=u,(n=[{key:"open",value:function(e){var t=e.name,n=e.link;this._image.src=n,this._image.alt=t,this._name.textContent=t,v(k(u.prototype),"open",this).call(this)}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t){var n=t.name,r=t.profession;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._profession=document.querySelector(r),this._inputName=document.querySelector(".popup__input_type_name"),this._inputProfession=document.querySelector(".popup__input_type_about")}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._inputName.value=this._name.textContent,profession:this._inputProfession.value=this._profession.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.profession;this._name.textContent=t,this._profession.textContent=n}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=P((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),L(this,"_showInputError",(function(e,t){var n=r._data.querySelector(".".concat(e.id,"-error"));e.classList.add(r._inputError),n.textContent=t,n.classList.add(r._inputErrorActive)})),L(this,"_hideInputError",(function(e){var t=r._data.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._inputError),t.classList.remove(r._inputErrorActive),t.textContent=""})),L(this,"_isValid",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),L(this,"_setEventListeners",(function(){r._toggleButtonState(),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._isValid(e),r._toggleButtonState()}))}))})),L(this,"enableValidation",(function(){r._setEventListeners()})),L(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),L(this,"_enabledButtonPlace",(function(){r._buttonElement.classList.remove(r._submitButtonInactive),r._buttonElement.disabled=!1})),L(this,"disabledButtonPlace",(function(){r._buttonElement.classList.add(r._submitButtonInactive),r._buttonElement.disabled=!0})),L(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r.disabledButtonPlace():r._enabledButtonPlace()})),this._form=t.form,this._inputError=t.inputError,this._inputErrorActive=t.inputErrorActive,this._inputForm=t.inputForm,this._submitButton=t.submitButton,this._submitButtonInactive=t.submitButtonInactive,this._data=n,this._inputList=Array.from(this._data.querySelectorAll(this._inputForm)),this._buttonElement=this._data.querySelector(this._submitButton)}));function q(e){return new t(e,".card-template_type_default",(function(){B.open(e)})).createCard()}var I=new r({item:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){I.addItem(q(e))}},".cards");I.renderItem();var B=new E(".popup_image");B.setEventListener();var R=new y({selectorPopup:".popup_add",handleFormSubmit:function(e){I.addItem(q(e)),R.close()}});R.setEventListener();var x=new O({name:".profile__name",profession:".profile__about-me"}),T=new y({selectorPopup:".popup_edit",handleFormSubmit:function(e){x.setUserInfo(e),T.close()}});T.setEventListener(),document.querySelector(".profile__add-button").addEventListener("click",(function(){R.open(),V.disabledButtonPlace()})),document.querySelector(".profile__edit-button").addEventListener("click",(function(){x.getUserInfo(),T.open()}));var A=document.querySelector(".popup__info_add");new C(o,document.querySelector(".popup__info_edit")).enableValidation();var V=new C(o,A);V.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SXJDLEVBQWUsZ0JBRW5DcUMsRUFBUU0sbUJBRVIsSUFBTUMsRUFBVSxJQUFJdkQsRUFBYyxDQUNoQ1osY0FBZSxhQUNmYSxpQkFBa0IsU0FBQzdCLEdBQ2pCK0UsRUFBU0MsUUFBUUwsRUFBVzNFLElBQzVCbUYsRUFBUWhFLFdBSVpnRSxFQUFRRCxtQkFFUixJQUFNRSxFQUFVLElBQUkzQyxFQUFTLENBQUNuRSxLQUFNLGlCQUFrQm9FLFdBQVcsdUJBRTNEMkMsRUFBVyxJQUFJekQsRUFBYyxDQUNqQ1osY0FBZSxjQUNmYSxpQkFBa0IsU0FBQzdCLEdBQ2pCb0YsRUFBUUUsWUFBWXRGLEdBQ3BCcUYsRUFBU2xFLFdBSWJrRSxFQUFTSCxtQkFHYXJHLFNBQVNDLGNBQWMsd0JBQy9CVSxpQkFBaUIsU0FBUyxXQUN0QzJGLEVBQVFOLE9BQ1JVLEVBQWFuQix5QkFHUXZGLFNBQVNDLGNBQWMseUJBQy9CVSxpQkFBaUIsU0FBUyxXQUN2QzRGLEVBQVFJLGNBQ1JILEVBQVNSLFVBR1gsSUFBTVksRUFBbUI1RyxTQUFTQyxjQUFjLG9CQUUxQixJQUFJZ0UsRUFBY3RDLEVBRGIzQixTQUFTQyxjQUFjLHNCQUVwQzRHLG1CQUNkLElBQU1ILEVBQWUsSUFBSXpDLEVBQWN0QyxFQUFVaUYsR0FDakRGLEVBQWFHLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHtuYW1lLCBsaW5rfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcikuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2l0ZW0nKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgY3JlYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIGNvbnN0IGltYWdJbmZvQ2FyZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19pbWFnZScpO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19uYW1lJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIGltYWdJbmZvQ2FyZC5zcmMgPSB0aGlzLl9saW5rO1xuICAgIGltYWdJbmZvQ2FyZC5hbHQgPSB0aGlzLl9uYW1lO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2xpa2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+e1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKClcbiAgICB9KTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fZGVsZXRlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVSZW1vdmVDbGljaygpO1xuICAgIH0pO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19pbWFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQ2xpY2soKSB7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2xpa2UnKS5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkc19fbGlrZV9hY3RpdmUnKTtcbiAgfVxuXG4gIF9oYW5kbGVSZW1vdmVDbGljaygpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtpdGVtLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faW5pdGlhbEFycmF5ID0gaXRlbTtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbSgpIHtcbiAgICB0aGlzLl9pbml0aWFsQXJyYXkuZm9yRWFjaChpdGVtID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogJ9CQ0YDRhdGL0LcnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JjQstCw0L3QvtCy0L4nLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JrQsNC80YfQsNGC0LrQsCcsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JHQsNC50LrQsNC7JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXG4gIH1cbl07XG5cbmV4cG9ydCBjb25zdCBmb3JtRWxlbSA9IHtcbiAgaW5wdXRFcnJvcjogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgaW5wdXRFcnJvckFjdGl2ZTogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxuICBpbnB1dEZvcm06ICcucG9wdXBfX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uOiAnLnBvcHVwX19idXR0b24nLFxuICBmb3JtOiAnLnBvcHVwX19pbmZvJyxcbiAgc3VibWl0QnV0dG9uSW5hY3RpdmU6ICdwb3B1cF9fYnV0dG9uX2luYWN0aXZlJ1xufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXApIHtcbiAgICB0aGlzLl9zZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JQb3B1cCk7XG4gICAgdGhpcy5fYnV0dG9uQ2xvc2UgPSB0aGlzLl9zZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3NlbGVjdG9yLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fc2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9zZWxlY3Rvci5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX3NlbGVjdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVDbGlja0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgdGhpcy5jbG9zZShldnQuY3VycmVudFRhcmdldCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcigpe1xuICAgIHRoaXMuX2J1dHRvbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pXG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuY29uc3RydWN0b3Ioe3NlbGVjdG9yUG9wdXAsIGhhbmRsZUZvcm1TdWJtaXR9KSB7XG4gICAgc3VwZXIoc2VsZWN0b3JQb3B1cCk7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCAgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9zZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2luZm8nKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9ICBpbnB1dC52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcigpIHtcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVyKCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3RvclBvcHVwKSB7XG4gICAgc3VwZXIoc2VsZWN0b3JQb3B1cCk7XG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9zZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltZycpO1xuICAgIHRoaXMuX25hbWUgPSB0aGlzLl9zZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RpdGxlLXBsYWNlJyk7XG4gIH1cblxuICBvcGVuKHtuYW1lLCBsaW5rfSkge1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcblxuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7bmFtZSwgcHJvZmVzc2lvbn0pIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lKTtcbiAgICB0aGlzLl9wcm9mZXNzaW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9mZXNzaW9uKTtcbiAgICB0aGlzLl9pbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpO1xuICAgIHRoaXMuX2lucHV0UHJvZmVzc2lvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9hYm91dCcpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJue1xuICAgICAgbmFtZTogdGhpcy5faW5wdXROYW1lLnZhbHVlID0gdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgIHByb2Zlc3Npb246IHRoaXMuX2lucHV0UHJvZmVzc2lvbi52YWx1ZSA9IHRoaXMuX3Byb2Zlc3Npb24udGV4dENvbnRlbnRcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oe25hbWUsIHByb2Zlc3Npb259KSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fcHJvZmVzc2lvbi50ZXh0Q29udGVudCA9IHByb2Zlc3Npb247XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBkYXRhKSB7XG4gICAgdGhpcy5fZm9ybSA9IGNvbmZpZy5mb3JtO1xuICAgIHRoaXMuX2lucHV0RXJyb3IgPSBjb25maWcuaW5wdXRFcnJvclxuICAgIHRoaXMuX2lucHV0RXJyb3JBY3RpdmUgPSBjb25maWcuaW5wdXRFcnJvckFjdGl2ZVxuICAgIHRoaXMuX2lucHV0Rm9ybSA9IGNvbmZpZy5pbnB1dEZvcm1cbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBjb25maWcuc3VibWl0QnV0dG9uXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uSW5hY3RpdmUgPSBjb25maWcuc3VibWl0QnV0dG9uSW5hY3RpdmVcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2RhdGEucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dEZvcm0pKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZGF0YS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvbik7XG4gIH07XG5cbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZGF0YS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvcik7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JBY3RpdmUpO1xuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9kYXRhLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQWN0aXZlKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgfTtcblxuICBfaXNWYWxpZCA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfTtcblxuICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG5cbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pXG4gIH07XG5cbiAgX2VuYWJsZWRCdXR0b25QbGFjZSA9ICgpID0+IHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc3VibWl0QnV0dG9uSW5hY3RpdmUpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfTtcblxuICBkaXNhYmxlZEJ1dHRvblBsYWNlID0gKCkgPT4ge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zdWJtaXRCdXR0b25JbmFjdGl2ZSk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIH07XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5kaXNhYmxlZEJ1dHRvblBsYWNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VuYWJsZWRCdXR0b25QbGFjZSgpO1xuICAgIH1cbiAgfTtcbn1cblxuIiwiaW1wb3J0IHtDYXJkfSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCB7Zm9ybUVsZW0sIGluaXRpYWxDYXJkc30gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcydcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCB7Rm9ybVZhbGlkYXRvcn0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCAnLi4vcGFnZXMvaW5kZXguY3NzJztcblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCAnLmNhcmQtdGVtcGxhdGVfdHlwZV9kZWZhdWx0JywgKCkgPT4ge1xuICAgIGltZ0l0ZW0ub3BlbihpdGVtKTtcbiAgfSk7XG4gIHJldHVybiBjYXJkLmNyZWF0ZUNhcmQoKTtcbn1cblxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gIGl0ZW06IGluaXRpYWxDYXJkcyxcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgY2FyZExpc3QuYWRkSXRlbShyZW5kZXJDYXJkKGl0ZW0pKTtcbiAgfVxufSwgJy5jYXJkcycpO1xuXG5jYXJkTGlzdC5yZW5kZXJJdGVtKCk7XG5cbmNvbnN0IGltZ0l0ZW0gPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF9pbWFnZScpO1xuXG5pbWdJdGVtLnNldEV2ZW50TGlzdGVuZXIoKTtcblxuY29uc3QgZm9ybUFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgc2VsZWN0b3JQb3B1cDogJy5wb3B1cF9hZGQnLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoaXRlbSkgPT4ge1xuICAgIGNhcmRMaXN0LmFkZEl0ZW0ocmVuZGVyQ2FyZChpdGVtKSk7XG4gICAgZm9ybUFkZC5jbG9zZSgpXG4gIH1cbn0pO1xuXG5mb3JtQWRkLnNldEV2ZW50TGlzdGVuZXIoKTtcblxuY29uc3QgcHJvZmlsZSA9IG5ldyBVc2VySW5mbyh7bmFtZTogJy5wcm9maWxlX19uYW1lJywgcHJvZmVzc2lvbjonLnByb2ZpbGVfX2Fib3V0LW1lJ30pO1xuXG5jb25zdCBmb3JtRWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgc2VsZWN0b3JQb3B1cDogJy5wb3B1cF9lZGl0JyxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGl0ZW0pID0+IHtcbiAgICBwcm9maWxlLnNldFVzZXJJbmZvKGl0ZW0pO1xuICAgIGZvcm1FZGl0LmNsb3NlKCk7XG4gIH1cbn0pO1xuXG5mb3JtRWRpdC5zZXRFdmVudExpc3RlbmVyKCk7XG5cblxuY29uc3QgYnV0dG9uT3BlbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5idXR0b25PcGVuQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBmb3JtQWRkLm9wZW4oKTtcbiAgdmFsaWRGb3JtQWRkLmRpc2FibGVkQnV0dG9uUGxhY2UoKTtcbn0pXG5cbmNvbnN0IGJ1dHRvbk9wZW5FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG5idXR0b25PcGVuRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgcHJvZmlsZS5nZXRVc2VySW5mbygpO1xuICBmb3JtRWRpdC5vcGVuKCk7XG59KVxuXG5jb25zdCBmb3JtUGxhY2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbmZvX2FkZCcpO1xuY29uc3QgZm9ybVByb2ZpbGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbmZvX2VkaXQnKTtcbmNvbnN0IHZhbGlkRm9ybUVkaXQgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWxlbSwgZm9ybVByb2ZpbGVFbGVtZW50KTtcbnZhbGlkRm9ybUVkaXQuZW5hYmxlVmFsaWRhdGlvbigpO1xuY29uc3QgdmFsaWRGb3JtQWRkID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVsZW0sIGZvcm1QbGFjZUVsZW1lbnQpO1xudmFsaWRGb3JtQWRkLmVuYWJsZVZhbGlkYXRpb24oKTtcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiaW1hZ0luZm9DYXJkIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVSZW1vdmVDbGljayIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW0iLCJyZW5kZXJlciIsIl9pbml0aWFsQXJyYXkiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJwcmVwZW5kIiwiZm9ybUVsZW0iLCJpbnB1dEVycm9yIiwiaW5wdXRFcnJvckFjdGl2ZSIsImlucHV0Rm9ybSIsInN1Ym1pdEJ1dHRvbiIsImZvcm0iLCJzdWJtaXRCdXR0b25JbmFjdGl2ZSIsIlBvcHVwIiwic2VsZWN0b3JQb3B1cCIsImV2dCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIl9zZWxlY3RvciIsIl9idXR0b25DbG9zZSIsImFkZCIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVDbGlja0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIlVzZXJJbmZvIiwicHJvZmVzc2lvbiIsIl9wcm9mZXNzaW9uIiwiX2lucHV0TmFtZSIsIl9pbnB1dFByb2Zlc3Npb24iLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZGF0YSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsIl9kYXRhIiwiaWQiLCJfaW5wdXRFcnJvciIsIl9pbnB1dEVycm9yQWN0aXZlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2lzVmFsaWQiLCJzb21lIiwiX2J1dHRvbkVsZW1lbnQiLCJfc3VibWl0QnV0dG9uSW5hY3RpdmUiLCJkaXNhYmxlZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZEJ1dHRvblBsYWNlIiwiX2VuYWJsZWRCdXR0b25QbGFjZSIsIl9mb3JtIiwiX2lucHV0Rm9ybSIsIl9zdWJtaXRCdXR0b24iLCJBcnJheSIsImZyb20iLCJyZW5kZXJDYXJkIiwiaW1nSXRlbSIsIm9wZW4iLCJjcmVhdGVDYXJkIiwiY2FyZExpc3QiLCJhZGRJdGVtIiwicmVuZGVySXRlbSIsInNldEV2ZW50TGlzdGVuZXIiLCJmb3JtQWRkIiwicHJvZmlsZSIsImZvcm1FZGl0Iiwic2V0VXNlckluZm8iLCJ2YWxpZEZvcm1BZGQiLCJnZXRVc2VySW5mbyIsImZvcm1QbGFjZUVsZW1lbnQiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==